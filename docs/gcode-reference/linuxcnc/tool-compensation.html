

<!DOCTYPE html>
<html class="writer-html5" lang="zh" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tool Compensation &mdash; cnc reference 0.1.0 文档</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=92fd9be5" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/PythonicGcodeMachine.css?v=f6519d23" />

  
    <link rel="canonical" href="https://cnc.caigk.com/gcode-reference/linuxcnc/tool-compensation.html" />
      <script src="../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../_static/documentation_options.js?v=74157ad4"></script>
      <script src="../../_static/doctools.js?v=9a2dae69"></script>
      <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../../_static/getthecode.js"></script>
      <script src="../../_static/matomo.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="索引" href="../../genindex.html" />
    <link rel="search" title="搜索" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            cnc reference
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="搜索文档" aria-label="搜索文档" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="导航菜单">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../rs-274/index.html">1. RS-274 G-code Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../rs-274/index.html#history">1.1. History</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rs-274/index.html#overview">1.2. Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rs-274/index.html#language-view-of-a-machining-center">1.3. Language View of a Machining Center</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../rs-274/index.html#parameters">1.3.1. Parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rs-274/index.html#coordinate-systems">1.3.2. Coordinate Systems</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../rs-274/index.html#format-of-a-line">1.4. Format of a Line</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../rs-274/index.html#line-number">1.4.1. Line Number</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rs-274/index.html#word">1.4.2. Word</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rs-274/index.html#number">1.4.3. Number</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rs-274/index.html#parameter-value">1.4.4. Parameter Value</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rs-274/index.html#expressions-and-binary-operations">1.4.5. Expressions and Binary Operations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rs-274/index.html#unary-operation-value">1.4.6. Unary Operation Value</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rs-274/index.html#parameter-setting">1.4.7. Parameter Setting</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rs-274/index.html#comments-and-messages">1.4.8. Comments and Messages</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rs-274/index.html#item-repeats">1.4.9. Item Repeats</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rs-274/index.html#item-order">1.4.10. Item order</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rs-274/index.html#commands-and-machine-modes">1.4.11. Commands and Machine Modes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../rs-274/index.html#modal-groups">1.5. Modal Groups</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rs-274/index.html#g-and-input-codes">1.6. G and Input Codes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rs-274/index.html#order-of-execution">1.7. Order of Execution</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../test.html">2. 1</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../test.html#id2">2.1. 2</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="移动版导航菜单" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">cnc reference</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="页面导航">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Tool Compensation</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/gcode-reference/linuxcnc/tool-compensation.rst.txt" rel="nofollow"> 查看页面源码</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="tool-compensation">
<h1>Tool Compensation<a class="headerlink" href="#tool-compensation" title="Link to this heading"></a></h1>
<section id="tool-length-offsets">
<h2>Tool Length Offsets<a class="headerlink" href="#tool-length-offsets" title="Link to this heading"></a></h2>
<section id="touch-off">
<h3>Touch Off<a class="headerlink" href="#touch-off" title="Link to this heading"></a></h3>
<p>Using the Touch Off Screen in the AXIS interface you can update the tool table automatically.</p>
<p>Typical steps for updating the tool table:</p>
<ul class="simple">
<li><p>After homing load a tool with 'Tn M6' where 'n' is the tool number.</p></li>
<li><p>Move tool to an established point using a gauge or take a test cut and measure.</p></li>
<li><p>Click the &quot;Touch Off&quot; button in the Manual Control tab (or hit the End button on your keyboard).</p></li>
<li><p>Select 'Tool Table' in the Coordinate System drop down box.</p></li>
<li><p>Enter the gauge or measured dimension and select OK.</p></li>
</ul>
<p>The Tool Table will be changed with the correct Z length to make the DRO display the correct Z
position and a G43 command will be issued so the new tool Z length will be in effect. Tool table
touch off is only available when a tool is loaded with 'Tn M6'.</p>
<p>Figure 1. Touch Off Tool Table</p>
</section>
<section id="using-g10-l1-l10-l11">
<h3>Using G10 L1/L10/L11<a class="headerlink" href="#using-g10-l1-l10-l11" title="Link to this heading"></a></h3>
<p>The G10 L1/L10/L11 commands can be used to set tool table offsets:</p>
<ul class="simple">
<li><dl class="simple">
<dt>'G10 L1 Pn' - Set offset(s) to a value. Current position irrelevant.  (see <a href="#id1"><span class="problematic" id="id2">`</span></a>G10 L1</dt><dd><p>&lt;#gcode:g10-l1&gt;`__ for details)</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>'G10 L10 Pn' - Set offset(s) so current position w/ fixture 1-8 becomes a value. (see <a href="#id3"><span class="problematic" id="id4">`</span></a>G10 L10</dt><dd><p>&lt;#gcode:g10-l10&gt;`__ for details)</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>'G10 L11 Pn' - Set offset(s) so current position w/ fixture 9 becomes a value. (see <a href="#id5"><span class="problematic" id="id6">`</span></a>G10 L11</dt><dd><p>&lt;#gcode:g10-l11&gt;`__ for details)</p>
</dd>
</dl>
</li>
</ul>
</section>
</section>
<section id="tool-table">
<h2>Tool Table<a class="headerlink" href="#tool-table" title="Link to this heading"></a></h2>
<p>The 'Tool Table' is a text file that contains information about each tool. The file is located in
the same directory as your configuration and is called 'tool.tbl'. The tools might be in a tool
changer or just changed manually. The file can be edited with a text editor or be updated using G10
L1. See the <a class="reference external" href="#sec:lathe-tool-table">Lathe Tool Table</a> Section for an example of the lathe tool
table format. The maximum number of entries in the tool table is 56. The maximum tool and pocket
number is 99999.</p>
<p>The <a class="reference external" href="#cha:tooledit-gui">Tool Editor</a> or a text editor can be used to edit the tool table. If you
use a text editor make sure you reload the tool table in the GUI.</p>
<section id="tool-table-format">
<h3>Tool Table Format<a class="headerlink" href="#tool-table-format" title="Link to this heading"></a></h3>
<p>Table 1. Tool Table Format</p>
<p>T#</p>
<p>P#</p>
<p>X</p>
<p>Y</p>
<p>Z</p>
<p>A</p>
<p>B</p>
<p>C</p>
<p>U</p>
<p>V</p>
<p>W</p>
<p>Dia</p>
<p>FA</p>
<p>BA</p>
<p>Ori</p>
<p>Rem</p>
<p>;</p>
<p>(no data after opening semicolon)</p>
<p>T1</p>
<p>P17</p>
<p>X0</p>
<p>Y0</p>
<p>Z0</p>
<p>A0</p>
<p>B0</p>
<p>C0</p>
<p>U0</p>
<p>V0</p>
<p>W0</p>
<p>D0</p>
<p>I0</p>
<p>J0</p>
<p>Q0</p>
<p>;rem</p>
<p>T2</p>
<p>P5</p>
<p>X0</p>
<p>Y0</p>
<p>Z0</p>
<p>A0</p>
<p>B0</p>
<p>C0</p>
<p>U0</p>
<p>V0</p>
<p>W0</p>
<p>D0</p>
<p>I0</p>
<p>J0</p>
<p>Q0</p>
<p>;rem</p>
<p>T3</p>
<p>P12</p>
<p>X0</p>
<p>Y0</p>
<p>Z0</p>
<p>A0</p>
<p>B0</p>
<p>C0</p>
<p>U0</p>
<p>V0</p>
<p>W0</p>
<p>D0</p>
<p>I0</p>
<p>J0</p>
<p>Q0</p>
<p>;rem</p>
<p>In general, the new tool table line format is:</p>
<ul class="simple">
<li><p>; - opening semicolon, no data</p></li>
<li><p>T - tool number, 0-99999 (tool numbers must be unique)</p></li>
<li><p>P - pocket number, 1-99999 (pocket numbers must be unique)</p></li>
<li><p>X..W - tool offset on specified axis - floating-point</p></li>
<li><p>D - tool diameter - floating-point, absolute value</p></li>
<li><p>I - front angle (lathe only) - floating-point</p></li>
<li><p>J - back angle (lathe only) - floating-point</p></li>
<li><p>Q - tool orientation (lathe only) - integer, 0-9</p></li>
<li><p>; - beginning of comment or remark - text</p></li>
</ul>
<p>The file consists of one opening semicolon on the first line, followed by up to a maximum of 56 tool
entries.</p>
<p>Earlier versions of LinuxCNC had two different tool table formats for mills and lathes, but since
the 2.4.x release, one tool table format is used for all machines. Just ignore the parts of the tool
table that don’t pertain to your machine, or which you don’t need to use.</p>
<p>Each line of the tool table file after the opening semicolon contains the data for one tool. One
line may contain as many as 16 entries, but will likely contain much fewer.</p>
<p>The units used for the length, diameter, etc., are in machine units.</p>
<p>You will probably want to keep the tool entries in ascending order, especially if you are going to
be using a randomizing tool changer.  Although the tool table does allow for tool numbers in any
order.</p>
<p>Each line may have up to 16 entries. The first two entries are required.  The last entry (a remark
or comment, preceded by a semicolon) is optional. It makes reading easier if the entries are
arranged in columns, as shown in the table, but the only format requirement is that there be at
least one space or tab after each of the entries on a line and a newline character at the end of
each entry.</p>
<p>The meanings of the entries and the type of data to be put in each are as follows.</p>
<p>Tool Number (required)</p>
<p>The 'T' column contains the number (unsigned integer) which represents a code number for the
tool. The user may use any code for any tool, as long as the codes are unsigned integers.</p>
<p>Pocket Number (required)</p>
<p>The 'P' column contains the number (unsigned integer) which represents the pocket number (slot
number) of the tool changer slot where the tool can be found. The entries in this column must all be
different.</p>
<p>The pocket numbers will typically start at 1 and go up to the highest available pocket on your tool
changer. But not all tool changers follow this pattern. Your pocket numbers will be determined by
the numbers that your tool changer uses to refer to the pockets. So all this is to say that the
pocket numbers you use will be determined by the numbering scheme used in your tool changer, and the
pocket numbers you use must make sense on your machine.</p>
<p>Data Offset Numbers (optional)</p>
<p>The 'Data Offset' columns (XYZABCUVW) contain real numbers which represent tool offsets in each
axis. This number will be used if tool length offsets are being used and this tool is
selected. These numbers can be positive, zero, or negative, and are in fact completely optional.
Although you will probably want to make at least one entry here, otherwise there would be little
point in making an entry in the tool table to begin with.</p>
<p>In a typical mill, you probably want an entry for Z (tool length offset). In a typical lathe, you
probably want an entry for X (X tool offset) and Z (Z tool offset). In a typical mill using cutter
diameter compensation (cutter comp), you probably also want to add an entry for D (cutter
diameter). In a typical lathe using tool nose diameter compensation (tool comp), you probably also
want to add an entry for D (tool nose diameter).</p>
<p>A lathe also requires some additional information to describe the shape and orientation of the
tool. So you probably want to have entries for I (tool front angle) and J (tool back angle). You
probably also want an entry for Q (tool orientation).</p>
<p>See the <a class="reference external" href="#cha:lathe-user-information">Lathe User Information</a> chapter for more detail.</p>
<p>The 'Diameter' column contains a real number. This number is used only if cutter compensation is
turned on using this tool. If the programmed path during compensation is the edge of the material
being cut, this should be a positive real number representing the measured diameter of the tool. If
the programmed path during compensation is the path of a tool whose diameter is nominal, this should
be a small number (positive or negative, but near zero) representing only the difference between the
measured diameter of the tool and the nominal diameter. If cutter compensation is not used with a
tool, it does not matter what number is in this column.</p>
<p>The 'Comment' column may optionally be used to describe the tool. Any type of description is
OK. This column is for the benefit of human readers only. The comment must be preceded by a
semicolon.</p>
</section>
<section id="tool-changers">
<h3>Tool Changers<a class="headerlink" href="#tool-changers" title="Link to this heading"></a></h3>
<p>LinuxCNC supports three types of tool changers: 'manual', 'random location' and 'fixed
location'. Information about configuring a LinuxCNC tool changer is in the <a class="reference external" href="#sec:emcio-section">EMCIO Section</a> of the INI chapter.</p>
<p>Manual Tool Changer</p>
<p>Manual tool changer (you change the tool by hand) is treated like a fixed location tool changer and
the P number is ignored. Using the manual tool changer only makes sense if you have tool holders
that remain with the tool (Cat, NMTB, Kwik Switch etc.) when changed thus preserving the location of
the tool to the spindle. Machines with R-8 or router collet type tool holders do not preserve the
location of the tool and the manual tool changer should not be used.</p>
<p>Fixed Location Tool Changers</p>
<p>Fixed location tool changers always return the tools to a fixed position in the tool changer. This
would also include designs like lathe turrets.  When LinuxCNC is configured for a fixed location
tool changer the 'P' number is ignored (but read, preserved and rewritten) by LinuxCNC, so you can
use P for any bookkeeping number you want.</p>
<p>Random Location Tool Changers</p>
<p>Random location tool changers swap the tool in the spindle with the one in the changer. With this
type of tool changer the tool will always be in a different pocket after a tool change. When a tool
is changed LinuxCNC rewrites the pocket number to keep track of where the tools are. T can be any
number but P must be a number that makes sense for the machine.</p>
</section>
</section>
<section id="cutter-compensation">
<h2>Cutter Compensation<a class="headerlink" href="#cutter-compensation" title="Link to this heading"></a></h2>
<p>Cutter Compensation allows the programmer to program the tool path without knowing the exact tool
diameter. The only caveat is the programmer must program the lead in move to be at least as long as
the largest tool radius that might be used.</p>
<p>There are two possible paths the cutter can take while cutter compensation is on to the left or
right side of a line when facing the direction of cutter motion from behind the cutter. To visualize
this imagine you were standing on the part walking behind the tool as it progresses across the
part. G41 is your left side of the line and G42 is the right side of the line.</p>
<p>The end point of each move depends on the next move. If the next move creates an outside corner the
move will be to the end point of the compensated cut line. If the next move creates in an inside
corner the move will stop short so to not gouge the part. The following figure shows how the
compensated move will stop at different points depending on the next move.</p>
<p>Figure 2. Compensation End Point</p>
<section id="overview">
<h3>Overview<a class="headerlink" href="#overview" title="Link to this heading"></a></h3>
<p>Tool Table</p>
<p>Cutter compensation uses the data from the tool table to determine the offset needed. The data can
be set at run time with G10 L1.</p>
<p>Programming Entry Moves</p>
<p>Any move that is long enough to perform the compensation will work as the entry move. The minimum
length is the cutter radius. This can be a rapid move above the work piece. If several rapid moves
are issued after a G41/42 only the last one will move the tool to the compensated position.</p>
<p>In the following figure you can see that the entry move is compensated to the right of the
line. This puts the center of the tool to the right of X0 in this case. If you were to program a
profile and the end is at X0 the resulting profile would leave a bump due to the offset of the entry
move.</p>
<p>Figure 3. Entry Move</p>
<p>Z Motion</p>
<p>Z axis motion may take place while the contour is being followed in the XY plane. Portions of the
contour may be skipped by retracting the Z axis above the part and by extending the Z-axis at the
next start point.</p>
<p>Rapid Moves</p>
<p>Rapid moves may be programed while compensation is turned on.</p>
<p>Good Practices</p>
<ul class="simple">
<li><p>Start a program with G40 to make sure compensation is off.</p></li>
</ul>
</section>
<section id="examples">
<h3>Examples<a class="headerlink" href="#examples" title="Link to this heading"></a></h3>
<p>Figure 4. Outside Profile</p>
<p>Figure 5. Inside Profile</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; 版权所有 2024, caigk。</p>
  </div>

  利用 <a href="https://www.sphinx-doc.org/">Sphinx</a> 构建，使用的 
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">主题</a>
    由 <a href="https://readthedocs.org">Read the Docs</a> 开发.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script> 

</body>
</html>